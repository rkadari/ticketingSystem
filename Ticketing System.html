<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {font-family: Arial;}

/* Style the tab */
.tab {
 /*    overflow: hidden;
    border: 1px solid #ccc;*/
    background-color: #007dc68f;
}

/* Style the buttons inside the tab */
.tab button {
    background-color: inherit;
    float: left;
    /*border: none;*/
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
    font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
    background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
    background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
    display: none;
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-top: none;
}
</style>
</head>
<body>



<div class="tab">
  <button class="tablinks" onclick="openCity(event, 'London')">Open Ticket</button>
  <button class="tablinks" onclick="openCity(event, 'Paris')">Track Ticket</button>
 </div>

<div id="London" class="tabcontent">
 <p>Have a Problem! No worries i am with you....</p>
<input type="button" onclick="location.href='https://edgeitcorpnet.sharepoint.com/Lists/Demo_Hr_Finance/NewForm.aspx?Source=https%3A%2F%2Fedgeitcorpnet%2Esharepoint%2Ecom%2FLists%2FDemo_Hr_Finance%2FAllItems%2Easpx&RootFolder=';" value="Click Me" />
</div>

<div id="Paris" class="tabcontent">
  <details>
  <summary>Tracking Status Of Your Ticket</summary>
  <p> Here we can create unique Id for each Ticket created by vaiorus Departments i.e, HR_10162017_1 will be the ticket number Autogenerated  to the user once he submit the ticket.by seeing the ticket we can easily analyze its from Hr Dept on 16 OCT.They can come down to this tracking point and track the status of the Ticket.</p>
  <p>Sample try this out.Hr_1,Fn_1,Hr_2,Fn_2.</p>
  
</details><br> <br> 
<p>Name: <input type="text" id="buttonid" name="user"></p>

<button id ="button1">Submit</button>
</div>

<script>
function openCity(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
}
</script>
 <script>
$(document).ready(function(){
 var DeptId="";
$("#button1").unbind().click(function() {
    var statusId=$("#buttonid").val();
		GetCurrentUsername(); 
		RestCall(statusId);
});
});
 
function RestCall(DeptId)
	{
	 $.ajax({
         
        url:"https://edgeitcorpnet.sharepoint.com/_api/lists/getbytitle('Demo_Hr_Finance')/items?$filter=(Dept_Id eq '" + DeptId + "')",
		method: "GET",
        headers: { "Accept": "application/json; odata=verbose" },
        success: function (data) {
		
			for(i=0;i<data.d.results.length;i++)
			{
				alert(data.d.results.length);
				alert(data.d.results[0].Manager);
			}
            
        },
        error: function (data) {
           
        }
    });
		 
		 
	}
function GetCurrentUsername()
{
var ctxt = new SP.ClientContext.get_current();
this.website = ctxt.get_web();
this.currentUser = website.get_currentUser();
ctxt.load(currentUser);
ctxt.executeQueryAsync(Function.createDelegate(this, this.onSucceess), Function.createDelegate(this, this.onFail));
}



function onSucceess(sender, args)
 {
 alert(currentUser.get_loginName());
 }



function onFail(sender, args)
{
alert('request failed ' + args.get_message() + '\n'+ args.get_stackTrace());
}	
	

</script>    
</body>
</html> 
